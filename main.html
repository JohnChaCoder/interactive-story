<!--
// ==============================================================================================================
// The Orange Cat in Grade School Hijinx: Black Cat Group Bullies - An Interactive Story
//
// Source code created by JohnChaCoder
// With help and thanks to mariflo35 and KrystalV8
//
// Started on Wednesday October 23, 2019
//
// Created and edited using Visual Studio Code. Â© 2019 Microsoft Corporation. All rights reserved.
// ==============================================================================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- This is a favicon -->
    <link rel="icon"
    type="image/png"
    href="assets/favicon.png">
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>The Orange Cat and the Black Cat Group</title>
</head>
<body>

        <!-- This is the title for the interactive story -->
        <h1 class="Title">The Orange Cat in Grade School Hijinx: Black Cat Group Bullies - An Interactive Story</h1>
        <p></p>
        <p class="intro">It all began on a normal Monday morning at the elementary school...</p>
        <!-- These buttons are just placeholders -->
        <!--
        <button>Not clickable yet</button>
        <button>Not clickable yet</button>
        <button>Not clickable yet</button>
        -->

    <!-- This displays each part of the story in these tags that are stored in the array -->
    <div id="story" class="story">

    </div>
    <p></p>
    <div id="buttons" class="buttons">

    </div>

    <!-- Everything from here on out is JavaScript code -->
    <script>
    
        // Our parts of the story in an array
        let storyContain = document.getElementById("story");

        // Our story context
        storyContain.innerHTML = "The Orange Cat goes to school that morning and hears the Black Cat Group hurting the students in the hallways."

        // Our buttons from the array
        let btnContain = document.getElementById("buttons");

        // Start on the intro
        let pagehist = ["intro"];

// ============================================================================
// The "story" object, which stores the different parts of the story
//
// choices - The button choices that are different in each part of the story
// ============================================================================
        const story = {
            intro : {
                text : "You have three choices",
                choices : [
                    ["Go to class", "option1"],
                    ["Confront", "option2"],
                    ["Go home", "option3"]
                ]
            },
            option1 : {
                text : "You go to class and your day continues as normal ",
                choices : [
                    ["four", "option2"],
                    ["five", "option3"],
                    ["six", "option4"]
                ]
            },
            option2 : {
                text : "This right here is the option 2 thingery",
                choices : ["seven", "eight", "nine"]
            },
            option3 : {
                text : "This right here is the option 3 thingery",
                choices : ["ten", "eleven", "twelve"]
            },
            option4 : {
                text : "This right here is the option 4 thingery",
                choices : ["thirteen", "fourteen", "fifteen"]
            },
            option5 : {
                text : "This right here is the option 5 thingery",
                choices : ["sixteen", "seventeen", "eighteen"]
            },
            option6 : {
                text : "This right here is the option 6 thingery",
                choices : ["nineteen", "twenty", "twentyone"]
            },
            finalPage : {
                text : "This is the end of the story",
                choices : []
            }
        }

        // button choices
//      for(let choice of story.intro.choices) {
//          createBtn(choice, choice)
//      }

// ============================================================================
// Subroutine that creates a button from the array of choices
// 
// btnText - Shows the text on the button that was created
// choice - The choices shown that are different in each part of the story
// ============================================================================
        function createBtn(btnText, choice) {
            // create a button
            let button = document.createElement
            ("button");

            // Get the text
            button.innerHTML = btnText

            // append to HTML(?)
            btnContain.appendChild(button);

            // Outputs the choice you have made after clicking the button
            button.addEventListener ("click", function () {
                pagehist.push(choice);
                alert("You chose " + choice);
                outputStory();
            });
        }

        // function to show a story
        function showStory(text) {
            let storyItem = document.createElement
            ("p");  // paragraph tag

            // stores the text(?)
            storyItem.innerText = text

            // append to HTML(?)
            storyContain.appendChild(storyItem);
        }

        // function to output the story into HTML
        function outputStory() {

            // sets the current page to the last index of the array.
            let currentpage = pagehist[pagehist.length - 1];

            // reset the story HTML and buttons
            storyContain.innerHTML  = "";
            btnContain.innerHTML    = "";
            
            // builds the story text from the array
            for (let page of pagehist) {
                showStory(story[page].text);
            }

            // builds the buttons for the story in the array
            for (let choice of story[currentpage].choices) {
                createBtn(choice[0], choice[1])
            }
        }
        
        // Shows the current story
        //showStory(story.intro.text)
        outputStory();

    </script>

    <p></p>
    <h5 class="copyright">Copyright (C) 2019.<br>Some of the features of this site will not work in Internet Explorer 9 or lower.</h5>
</body>
</html>